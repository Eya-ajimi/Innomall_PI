<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import java.net.URL?>

<VBox fx:id="root" spacing="15" styleClass="reserved-spots-dialog"
      xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="tn.esprit.gui.ReservedSpotsController">
    <stylesheets>
        <URL value="@/css/reserved_spots_dialog.css" />
    </stylesheets>
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <HBox styleClass="dialog-header" alignment="CENTER">
        <Text styleClass="dialog-title" text="Reserved Parking Spots"/>
    </HBox>

    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="search-container">
        <TextField fx:id="searchField" promptText="Search reservations..."
                   styleClass="search-field"/>
        <ComboBox fx:id="statusFilter" promptText="Filter by status"
                  styleClass="status-filter"/>
    </HBox>

    <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS">
        <TableView fx:id="reservationTable" styleClass="reservation-table">
            <columns>
                <TableColumn text="Spot #" prefWidth="80" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="idParking"/>
                    </cellValueFactory>
                </TableColumn>

                <TableColumn text="Reserved On" prefWidth="140" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="dateReservation"/>
                    </cellValueFactory>
                </TableColumn>

                <TableColumn text="Expires On" prefWidth="140" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="dateExpiration"/>
                    </cellValueFactory>
                </TableColumn>

                <TableColumn text="Status" prefWidth="100" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="statut"/>
                    </cellValueFactory>
                </TableColumn>

                <!-- New Columns -->
                <TableColumn text="Vehicle Type" prefWidth="120" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="vehicleType"/>
                    </cellValueFactory>
                </TableColumn>

                <TableColumn text="Car Wash Type" prefWidth="120" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="carWashType"/>
                    </cellValueFactory>
                </TableColumn>

                <TableColumn text="Notes" prefWidth="200" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="notes"/>
                    </cellValueFactory>
                </TableColumn>

                <TableColumn text="Price" prefWidth="80" styleClass="table-column">
                    <cellValueFactory>
                        <PropertyValueFactory property="price"/>
                    </cellValueFactory>
                </TableColumn>
            </columns>
        </TableView>
    </ScrollPane>

    <HBox spacing="10" alignment="CENTER_RIGHT" styleClass="button-container">
        <Button text="Refresh" onAction="#handleRefreshAction"
                styleClass="action-button, refresh-button"/>
        <Button text="Close" onAction="#handleCloseButtonAction"
                styleClass="action-button, close-button"/>
    </HBox>
</VBox>